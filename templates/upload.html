<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Upload Presentation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- CSS -->
  <link rel="stylesheet" href="../static/css/upload.css">

  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tektur:wght@400..900&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" sizes="32x32"
          href="{{ url_for('static', filename='assests/logo.png') }}">
</head>

<body>

  <!-- Background Video -->
  <video class="bg-video" autoplay muted loop playsinline>
    <source src="../static/assests/flow_gradient_remix.webm" type="video/webm">
  </video>

  <!-- NAVBAR -->
  <header class="navbar">
    <div class="navbar-left">
      <div class="logo">
        <img src="../static/assests/logo.png" alt="PresenLytics Logo">
      </div>
      <a href="/index" class="brand">PresenLytics</a>
    </div>

    <div class="navbar-right">
      <div class="profile-icon" onclick="toggleProfile()">
        <img src="../static/assests/profile.svg" alt="profile icon">
      </div>
    </div>
  </header>

  <!-- PROFILE PANEL -->
  <aside class="profile-panel" id="profilePanel">
    <h3>Your Profile</h3>
    <p><strong>Name:</strong> <span id="userName">New User</span></p>
    <p><strong>Email:</strong> <span id="userEmail">user@email.com</span></p>

    <hr />

    <p>Tags Created: <span id="profileTagCount">0</span></p>
    <p>Videos Uploaded: <span id="profileVideoCount">0</span></p>

    <button class="profile-btn">Edit Profile</button>
    <button class="profile-btn logout" onclick="logout()">Logout</button>
  </aside>

  <!-- MAIN PAGE -->
  <div class="page">
    <div class="upload-card">

      <!-- Heading + Info -->
      <div class="heading-row">
        <h1 class="heading">Upload Your Presentation</h1>
        <span class="info-btn" id="infoBtn">
           <img src="../static/assests/Info.svg">
        </span>
      </div>

      <div class="info-panel" id="infoPanel">
        <h4>Recording Guidelines</h4>
        <ul>
          <li>Ensure proper lighting on your face</li>
          <li>Keep upper body visible</li>
          <li>No background noise</li>
          <li>No other people in frame</li>
          <li>Use stable camera position</li>
        </ul>
      </div>

      <p class="subheading">
        Upload your presentation video to receive AI-powered feedback
      </p>

      <form id="uploadForm" >
<input type="hidden" name="firebase_uid" id="firebaseUidInput">
        <!-- FILE INPUT -->
        <label class="file-box">
          <input type="file" name="video" id="videoInput" accept="video/*" required hidden />
          <div class="file-ui" id="fileUI">
            <div class="cloud">☁️</div>
            <p><strong>Click to choose video</strong></p>
            <span>MP4, MOV supported</span>
          </div>
        </label>

        <!-- VIDEO PREVIEW -->
        <div class="preview-container" id="previewContainer" style="display: none;">
          <video id="videoPreview" controls></video>

          <div class="file-info">
            <span id="fileName" class="file-name"></span>
            <span class="remove-file" id="removeFile">✕</span>
          </div>
        </div>

        <!-- INPUTS -->
        <!-- TAG SECTION -->
<div class="input-group tag-section">

  <label>Select Person (Tag)</label>

  <!-- Dropdown -->
  <select id="tagDropdown" name="tag_name">
    <option value="">Select existing tag</option>
    
  </select>

  <!-- Divider -->
  <div class="tag-divider">
    <span>or</span>
  </div>

  <!-- Create New Tag -->
  <div class="new-tag-row">
    <input type="text" id="newTagInput" placeholder="Create new tag" />
  </div>

</div>


        <div class="input-group">
          <label>Video Title</label>
          <input type="text" name="video_name" placeholder="Eg: Project Review" id="videoTitleInput" required />
        </div>

        <!-- BUTTON -->
        <button type="submit" class="upload-btn">
          Upload & Analyze →
        </button>

      </form>
    </div>
  </div>

  <!-- JS -->
   <div id="uploadOverlay" class="upload-overlay">
  <div class="loader-box">
    <div class="spinner"></div>
    <p>Uploading & Analyzing your video...</p>
  </div>
</div>
  <script type="module" src="../static/js/upload.js"></script>

</body>
</html>
